
\chapter{Commands Bitbake}%
\label{cha:commands_bitbake}

\textbf{NOTE}: Ein \textit{Image} ist in der Bitbake welt ebenso
ein \textit{recipie} und wird entsprechend gleich behandelt. Alle befehle die
für \glq einfache\grq recipes gelten (z.b. Kernel Modules oder Applikationen),
gelten ebenso für image-recipes.


\section{Bitbake Quellen}%
\label{sec:bitbake_quellen}
Eine die offizielle Dokumentation zu \textit{Bitbake} und
\textit{Bitbake-Layers} mitmitsamt Kommandoist zu finden unter:
.  Eine Übersicht über die Kommandos von Bitbake-Layers  ist zu finden unter
\cite[156]{Gonzalez2018:Embedded_Linux_Development_Using_Yocto_Project_Cookbook_2nd}
und im Anschluss in Anwendung gezeigt.


\section{Neuer \textit{meta-layer}}%
\label{sec:_a_new_recipes}
Nachfolgende möglichkeiten stehen bereit, um einen neuen Meta-daten layer zu
erstellen:
\begin{itemize}
    \item yokto-layer create <myLayer> (\textbf{Empfohlen})
    \item bitbake-layers create-layer <mylayer>
\end{itemize}

Wie sich einer neuer meta-layer zum Build hinzufügen lässt, ist nachzulesen
unter \ref{sec:meta_layer_zum_build_hinzufugen}, Seite
\pageref{sec:meta_layer_zum_build_hinzufugen}.

\section{meta-layer zum build hinzufügen}%
\label{sec:meta_layer_zum_build_hinzufugen}
Um einen neuen Metadaten-layer zum Buildsystem hinzu zu fügen, muss dieser in
die datei \textit{/conf/bblaysers.conf} Bitbake bekant gegeben werden. Hierzu
stehen nachfolgende Möglichkeiten bereit:
\begin{itemize}
    \item Manueles Eintragen der des Pfades zum meta-layer (\textbf{Empfohlen})
    \item bitbake-layers add-layer <layername>.
\end{itemize}



\section{Active meta-layer auflisten}%
\label{sec:active_meta_layer_auflisten}
Um alle aktiven meta-layer aufzulisten die im build einbezogen werden, stehen
nachfolgenden Möglichkeiten bereit:

\begin{itemize}
    \item Manuelles Einsehen der Datei con/bblayers.con
    \item bitbake-layers show-layers (\textbf{Empfohlen})
\end{itemize}


\section{Anzeigen aller recipes - beispielsweise aller images}%
\label{sec:anzeigen_aller_recipes}
Recipies die während eines Builds aktive sind und ausgeführt werden lassen sich
wie folgt anzeigen:

\begin{itemize}
    \item bitbake-layer show-recipes [<recipes>]
    \item bitbake-layer show-recipes [<recipes>] | grep image
\end{itemize}


\section{Anzeigen der Tasks eines recipes}%
\label{sec:anzeigen_der_tasks_eines_recipes}
Jedes Recipes besitzt eine eine Anzahl von standard Tasks die es direkt oder
indirekt implementiert hat oder erbt.
Alle Task die eine recipe besitzt und somit während eines builds
durchlaufen werden lassen sich anzeigen durch:

\begin{itemize}
    \item bitbake -c listtasks <recipes>
\end{itemize}

Wie gezielt einzelne bzw. bestimmte Task eines Recipes ausgeführt werden ist
unter \ref{sec:ausfuhren_bestimmter_tasks_eines_recipies}, Seite
\pageref{sec:ausfuhren_bestimmter_tasks_eines_recipies} beschrieben.

\section{Ausführen bestimmter Tasks eines Recipes}%
\label{sec:ausfuhren_bestimmter_tasks_eines_recipies}

Der Parameter \textit{bitbake -c} (bitbake -command) ermöglicht das Ausführen
bestimmter Tasks eines Recipes:

\begin{itemize}
    \item bitbake -c <cmd> <recipes>
\end{itemize}


\section{Umgebungsvariablen eines Recipes}%
\label{sec:umgebungsvariablen_eines_recipes}
Die Umgebungsvariablen welche eine Recipe dauerhaft oder temporär setzt,
erweitert oder löscht, lassen sich wie folgt anzeigen.
\begin{itemize}
    \item bitbake -e <recipes>
\end{itemize}

Es kan geziehlt nach einzelnen Variablen gefiltert werden:

\begin{itemize}
    \item bitbake -e <recipes> | grep \^<ENVVARIABLE>
\end{itemize}

\subsection{Häufig benötigte Umgebungsvariablen}%
\label{sub:haufig_gesucht_umgebungsvariablen}

\begin{itemize}
    \item bitbake -e virtual/kernel | grep \textbf{\^SRC\_URI=}
    \item bitbake virtual/kernel -e | grep \textbf{
            \glqq PREFERRED\_PROVIDER\_virtual/kernel\grqq}
\end{itemize}



\section{Erzeugen von temporären entwicklungs-Shells}%
\label{sec:temporaten_entwicklungs_shells}

Bitbake ist in der Lage temporäre, gekapselte und vorkonfigurierte
Entwicklungs-Shells zu erzeugen und zu öffnen:

\begin{itemize}
    \item bitbake -c devshell <recipes>
    \item bitbake -c devpyshell <recipes>
\end{itemize}

Dabei unterscheidet bitbake zwischen einer normalen Bash-Shell und einer
Phython-Shell (Die beiden Skriptsprachen welche innerhalb bitbake Anwendung
finden. Beispielsweise wahlweise Python als auch Bash-Shell commandos
(kombiniert) innerhalb eines Recipe verwenden.



